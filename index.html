<!Doctype html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <title>Detectando el lenguaje del navegador</title>
    </head>
    
    <body>
        <h1>Hola Mundo</h1>
        <p>Detactando le lenguaje del navegador</p>
        
        <script> 
            const lang = getLanguage()
            
            switch(lang) {
                
                case 'es':
                    document.location.href = 'https://inbound.digifianz.com/'
                    break
                    
                case 'en':
                    document.location.href = 'https://inbound.digifianz.com/en'
                    break
                    
                default:
                    document.location.href = 'https://inbound.digifianz.com/'
            }
            
            function getLanguage() {
                
                var lang    
                var nav = navigator.userAgent.toLowerCase()
                
                if (nav.indexOf("msie") != -1 || nav.indexOf("rv") != -1) { // msi for IE and rv for IE11+
    
                    var req = new XMLHttpRequest()
                    req.open('GET', 'resources/inspect-headers.py?filter_name=accept-language', false)
                    req.send(null)
                    var headers = req.getAllResponseHeaders().toLowerCase()
                    var contentLanguage = headers.match( /^content-language\:(.*)$/gm )
    
                    if (contentLanguage[0]) {
	                   lang = contentLanguage[0].split(": ")[1]
                    }
    
                } else {		
                    if (navigator.languages == undefined) {
                        
                        if (navigator.language == undefined) {
                            // Internet Explorer Compatibility
                            lang = navigator.userLanguage.slice(0,2)
                            
                        } else {
                            // Old navigator compatibility
                            lang= navigator.language.slice(0,2)
                        }
                        
                    } else { 
                        lang = navigator.languages[0].slice(0,2)			
                    }
                }

                return lang
                
            }
        </script>
    </body>
</html>